<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>💻 مساعد الكمبيوتر الذكي</title>
    <style>
        :root {
            --bg-light: #f5f5f5;
            --text-light: #222;
            --card-light: #fff;
            --bg-dark: #121212;
            --text-dark: #eee;
            --card-dark: #1e1e1e;
            --primary: #3498db;
            --primary-dark: #2980b9;
            --transition: all 0.4s ease;
        }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: 'Cairo', sans-serif;
            background: var(--bg-light);
            color: var(--text-light);
            transition: var(--transition);
            padding-top: 60px;
        }
        body.dark { background: var(--bg-dark); color: var(--text-dark); }
        header {
            position: fixed; top: 0; left: 0; right: 0;
            background: var(--primary); color: #fff;
            text-align: center; padding: 15px; font-size: 1.5rem;
            z-index: 1000;
        }
        #theme-toggle {
            position: fixed; top: 15px; left: 15px;
            background: none; border: none; font-size: 24px;
            cursor: pointer; transition: transform .6s; z-index: 1001;
        }
        #theme-toggle.rotate { transform: rotate(180deg); }
        #theme-toggle:focus { outline: none; } /* إزالة اللون الأزرق */

        /* زرار صفحة التجميعات */
        .builds-button-container {
            text-align: center;
            margin-top: 20px;
            margin-bottom: 20px;
        }
        .builds-button {
            padding: 12px 24px;
            background-color: var(--primary);
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1.1rem; /* تكبير الخط شوية */
            transition: background-color 0.3s ease;
        }
        .builds-button:hover {
            background-color: var(--primary-dark);
        }

        /* قسم الأسئلة */
        .qa {
            max-width: 500px; margin: 0 auto 20px; /* تقليل المارجن العلوي */
            display: flex; box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            border-radius: 8px; overflow: hidden;
            background: var(--card-light); transition: background .4s;
        }
        body.dark .qa { background: var(--card-dark); }
        .qa input {
            flex: 1; padding: 12px; border: none; outline: none;
            font-size: 1rem; background: transparent; color: inherit;
        }
        .qa button {
            padding: 0 20px; border: none;
            background: var(--primary); color: #fff;
            cursor: pointer; transition: background .3s;
        }
        .qa button:hover { background: var(--primary-dark); }
        #qa-answer {
            max-width: 500px; margin: 10px auto 20px;
            padding: 15px; background: var(--card-light);
            border-radius: 8px; box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            min-height: 60px; transition: background .4s;
        }
        body.dark #qa-answer { background: var(--card-dark); }

        /* الأقسام */
        .sections {
            max-width: 1000px; margin: 0 auto 40px; padding: 0 10px;
        }
        .section { margin-bottom: 20px; }
        .section-header-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: var(--primary);
            color: #fff;
            padding: 12px 16px;
            border-radius: 6px;
            cursor: pointer;
            transition: background .3s;
            user-select: none;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        .section-header-container:hover {
            background: var(--primary-dark);
            box-shadow: 0 2px 6px rgba(0,0,0,0.2);
        }
        .sort-options {
            display: flex;
            gap: 10px;
        }
        .sort-button {
            background: none;
            border: none;
            color: #fff;
            cursor: pointer;
            font-size: 0.9rem;
            opacity: 0.8;
            transition: opacity 0.3s, background-color 0.2s;
            padding: 0;
        }
        .sort-button:hover {
            opacity: 1;
        }
        .sort-button:active {
            background-color: var(--primary-dark);
        }
        .section-title {
            flex-grow: 1;
            text-align: right;
            margin-right: 15px;
        }
        .section-header-arrow {
            margin-left: 10px;
        }
        .section-header-arrow::after {
            content: '▼';
            transition: transform .3s;
        }
        .section-header-arrow.open::after {
            transform: rotate(180deg);
        }
        .content {
            display: none; margin-top: 10px; animation: fadeIn .3s ease-out;
        }
        .content.visible { display: block; }
        @keyframes fadeIn { from { opacity:0; transform:translateY(-5px);} to { opacity:1; transform:translateY(0);} }

        /* بطاقات المنتجات */
        .products {
            display: grid; grid-template-columns: repeat(auto-fill,minmax(200px,1fr));
            gap: 15px;
        }
        .product {
            background: var(--card-light); border-radius: 8px;
            overflow: hidden; box-shadow: 0 2px 6px rgba(0,0,0,0.1);
            text-align: center; transition: transform .3s, box-shadow .3s, background .4s, opacity .2s;
            cursor: pointer;
        }
        body.dark .product { background: var(--card-dark); }
        .product:hover {
            transform: translateY(-3px); box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            opacity: 0.9;
        }
        .product img {
            width: 100%; height: 140px; object-fit: cover; background: #ddd;
        }
        .details {
            padding: 10px;
        }
        .details h3 {
            font-size: 1rem; margin: 8px 0;
        }
        .details p {
            font-size: 0.9rem; margin: 6px 0;
        }
        .details a {
            display: inline-block; margin-top: 8px;
            padding: 6px 12px; background: var(--primary);
            color: #fff; border-radius: 4px;
            text-decoration: none; transition: background .3s;
        }
        .details a:hover { background: var(--primary-dark); }

        /* تجاوب على الموبايل */
        @media(max-width:600px){
            .products { grid-template-columns:1fr; }
            .qa { flex-direction:column; }
            .qa input, .qa button { width:100%; border-radius:0; }
            .qa button { margin-top:5px; }
        }
    </style>
</head>
<body class="dark">
    <button id="theme-toggle"><span id="theme-icon">☀️</span></button>
    <header>💻 مساعد الكمبيوتر الذكي</header>

    <div class="builds-button-container">
        <button class="builds-button" onclick="window.location.href='builds.html'">عرض صفحة التجميعات الذكية</button>
    </div>

    <div class="qa">
        <input id="qa-input" placeholder="مثال: كم سعر RTX 3060؟">
        <button id="qa-btn">اسأل</button>
    </div>
    <div id="qa-answer"></div>

    <div class="sections">
        <div class="section">
            <div class="section-header-container" data-id="gpus">
                <div class="section-title section-header-arrow">🎮 كروت الشاشة</div>
                <div class="sort-options">
                    <button class="sort-button" data-sort="price-asc">الأرخص</button>
                    <button class="sort-button" data-sort="price-desc">الأغلى</button>
                </div>
            </div>
            <div class="content" id="gpus"><div class="products"></div></div>
        </div>
        <div class="section">
            <div class="section-header-container" data-id="cpus">
                <div class="section-title section-header-arrow">🧠 المعالجات</div>
                <div class="sort-options">
                    <button class="sort-button" data-sort="price-asc">الأرخص</button>
                    <button class="sort-button" data-sort="price-desc">الأغلى</button>
                </div>
            </div>
            <div class="content" id="cpus"><div class="products"></div></div>
        </div>
        <div class="section">
            <div class="section-header-container" data-id="ram">
                <div class="section-title section-header-arrow">💾 الذاكرة العشوائية (RAM)</div>
                <div class="sort-options">
                    <button class="sort-button" data-sort="price-asc">الأرخص</button>
                    <button class="sort-button" data-sort="price-desc">الأغلى</button>
                </div>
            </div>
            <div class="content" id="ram"><div class="products"></div></div>
        </div>
        <div class="section">
            <div class="section-header-container" data-id="storage">
                <div class="section-title section-header-arrow">💾 التخزين (SSD/HDD)</div>
                <div class="sort-options">
                    <button class="sort-button" data-sort="price-asc">الأرخص</button>
                    <button class="sort-button" data-sort="price-desc">الأغلى</button>
                </div>
            </div>
            <div class="content" id="storage"><div class="products"></div></div>
        </div>
        <div class="section">
            <div class="section-header-container" data-id="motherboards">
                <div class="section-title section-header-arrow">🖥️ اللوحات الأم</div>
                <div class="sort-options">
                    <button class="sort-button" data-sort="price-asc">الأرخص</button>
                    <button class="sort-button" data-sort="price-desc">الأغلى</button>
                </div>
            </div>
            <div class="content" id="motherboards"><div class="products"></div></div>
        </div>
        <div class="section">
            <div class="section-header-container" data-id="psus">
                <div class="section-title section-header-arrow">🔌 مزود الطاقة (PSU)</div>
                <div class="sort-options">
                    <button class="sort-button" data-sort="price-asc">الأرخص</button>
                    <button class="sort-button" data-sort="price-desc">الأغلى</button>
                </div>
            </div>
            <div class="content" id="psus"><div class="products"></div></div>
        </div>
        <div class="section">
            <div class="section-header-container" data-id="cooling">
                <div class="section-title section-header-arrow">❄️ التبريد</div>
                <div class="sort-options">
                    <button class="sort-button" data-sort="price-asc">الأرخص</button>
                    <button class="sort-button" data-sort="price-desc">الأغلى</button>
                </div>
            </div>
            <div class="content" id="cooling"><div class="products"></div></div>
        </div>
        <div class="section">
            <div class="section-header-container" data-id="keyboards">
                <div class="section-title section-header-arrow">⌨️ الكيبوردات</div>
                <div class="sort-options">
                    <button class="sort-button" data-sort="price-asc">الأرخص</button>
                    <button class="sort-button" data-sort="price-desc">الأغلى</button>
                </div>
            </div>
            <div class="content" id="keyboards"><div class="products"></div></div>
        </div>
        <div class="section">
            <div class="section-header-container" data-id="mice">
                <div class="section-title section-header-arrow">🖱️ الماوسات</div>
                <div class="sort-options">
                    <button class="sort-button" data-sort="price-asc">الأرخص</button>
                    <button class="sort-button" data-sort="price-desc">الأغلى</button>
                </div>
            </div>
            <div class="content" id="mice"><div class="products"></div></div>
        </div>
    </div>

    <script>
        const catalog = {
            gpus: [
                {name: "NVIDIA RTX 3060", image: "https://m.media-amazon.com/images/I/71f1fy72oJL._AC_SL1500_.jpg", link: "https://www.amazon.eg/dp/B08P2DKQ39", price: 9500},
                {name: "NVIDIA RTX 3070", image: "https://m.media-amazon.com/images/I/71b54GvR54L._AC_SL1500_.jpg", link: "https://www.amazon.eg/dp/B08HRBW6VB", price: 13000},
                {name: "AMD RX 6600 XT", image: "https://m.media-amazon.com/images/I/71K64Qk9+YL._AC_SL1500_.jpg", link: "https://www.amazon.eg/s?k=rx+6600+xt", price: 7800},
                {name: "AMD RX 6700 XT", image: "https://m.media-amazon.com/images/I/713jYFom-ZL._AC_SL1500_.jpg", link: "https://www.amazon.eg/s?k=rx+6700+xt", price: 11500},
                {name: "NVIDIA RTX 4070 Ti Super", image: "https://m.media-amazon.com/images/I/819wJ9xL1PL._AC_SL1500_.jpg", price: 16500},
                {name: "AMD RX 7900 GRE", image: "https://m.media-amazon.com/images/I/81T34zY7mFL._AC_SL1500_.jpg", price: 17000},
                {name: "RTX 4080 Super 16GB", image: "https://m.media-amazon.com/images/I/81B69-joAaL._AC_SL1500_.jpg", price: 21500},
                {name: "RX 7900 XTX 24GB", image: "https://m.media-amazon.com/images/I/81oV9myImHL._AC_SL1500_.jpg", price: 22000},
                {name: "AMD Radeon RX 7900 XTX", image: "https://m.media-amazon.com/images/I/81oV9myImHL._AC_SL1500_.jpg", price: 18500}, // من تجميعة 45000
                {name: "NVIDIA RTX 4070 Ti SUPER", image: "https://m.media-amazon.com/images/I/819wJ9xL1PL._AC_SL1500_.jpg", price: 18000}, // من تجميعة 45000
                {name: "NVIDIA GeForce RTX 4080 Super", image: "https://m.media-amazon.com/images/I/81B69-joAaL._AC_SL1500_.jpg", price: 22000}, // من تجميعة 50000
            ],
            cpus: [
                {name: "Intel i5-12400F", image: "https://m.media-amazon.com/images/I/51cwFjB9FjL._AC_SL1200_.jpg", link: "https://www.amazon.eg/s?k=intel+12400f", price: 4300},
                {name: "Intel i7-12700K", image: "https://m.media-amazon.com/images/I/61w99f81fPL._AC_SL1500_.jpg", link: "https://www.amazon.eg/dp/B09J6YWB46", price: 6200},
                {name: "AMD Ryzen 5 5600X", image: "https://m.media-amazon.com/images/I/61xG994823L._AC_SL1373_.jpg", link: "https://www.amazon.eg/dp/B08R62ZWGL", price: 5000},
                {name: "AMD Ryzen 7 5800X", image: "https://m.media-amazon.com/images/I/61i9IfPakrL._AC_SL1373_.jpg", link: "https://www.amazon.eg/s?k=ryzen+7+5800x", price: 7200},
                {name: "AMD Ryzen 7 7800X3D", image: "https://m.media-amazon.com/images/I/61i9IfPakrL._AC_SL1373_.jpg", price: 11000},
                {name: "Intel Core i7-14700KF", image: "https://m.media-amazon.com/images/I/61fJt99QJQL._AC_SL1500_.jpg", price: 13000},
                {name: "AMD Ryzen 9 7900X", image: "https://m.media-amazon.com/images/I/61lBfJp66dL._AC_SL1500_.jpg", price: 13000},
                {name: "AMD Ryzen 9 7950X", image: "https://m.media-amazon.com/images/I/61B21n11GSL._AC_SL1500_.jpg", price: 15000},
                {name: "Intel Core i9-14900KF", image: "https://m.media-amazon.com/images/I/61fJt99QJQL._AC_SL1500_.jpg", price: 15000},
                {name: "AMD Ryzen 9 7900X", image: "https://m.media-amazon.com/images/I/61lBfJp66dL._AC_SL1500_.jpg", price: 13000}, // من تجميعة 45000
                {name: "Intel Core i7-14700KF", image: "https://m.media-amazon.com/images/I/61fJt99QJQL._AC_SL1500_.jpg", price: 13000}, // من تجميعة 45000
                {name: "AMD Ryzen 9 7950X", image: "https://m.media-amazon.com/images/I/61B21n11GSL._AC_SL1500_.jpg", price: 15000}, // من تجميعة 50000
                {name: "Intel Core i9-14900KF", image: "https://m.media-amazon.com/images/I/61fJt99QJQL._AC_SL1500_.jpg", price: 15000}, // من تجميعة 50000
            ],
            ram: [
                {name: "Corsair Vengeance LPX 16GB", image: "https://m.media-amazon.com/images/I/514h7wT45KL._AC_SL1200_.jpg", link: "https://www.amazon.eg/s?k=corsair+vengeance+16gb", price: 1100},
                {name: "G.Skill Trident Z RGB 16GB", image: "https://m.media-amazon.com/images/I/7164n8uX7jL._AC_SL1500_.jpg", link: "https://www.amazon.eg/s?k=gskill+trident+z+16gb", price: 1300},
                {name: "Kingston Fury Beast 16GB", image: "https://m.media-amazon.com/images/I/61KCXyMhuWL._AC_SL1500_.jpg", price: 1200},
                {name: "32GB DDR5 6000MHz CL30", image: "https://m.media-amazon.com/images/I/519F-bJqRzL._AC_SL1000_.jpg", price: 3200},
                {name: "32GB DDR5 (2x16GB) 6000MHz CL30", image: "https://m.media-amazon.com/images/I/519F-bJqRzL._AC_SL1000_.jpg", price: 3200}, // من تجميعة 42000
                {name: "32GB DDR5 (2x16GB) 6000MHz CL30", image: "https://m.media-amazon.com/images/I/519F-bJqRzL._AC_SL1000_.jpg", price: 3200}, // من تجميعة 45000
                {name: "32GB DDR5 (2x16GB) 6000MHz CL30", image: "https://m.media-amazon.com/images/I/519F-bJqRzL._AC_SL1000_.jpg", price: 3200}, // من تجميعة 50000
            ],
            storage: [
                {name: "Samsung 970 EVO Plus 1TB", image: "https://m.media-amazon.com/images/I/714hJ-JQS-L._AC_SL1500_.jpg", link: "https://www.amazon.eg/s?k=samsung+970+evo+plus", price: 1800},
                {name: "Kingston A2000 1TB", image: "https://m.media-amazon.com/images/I/61lVn017mL._AC_SL1500_.jpg", link: "https://www.amazon.eg/s?k=kingston+a2000+1tb", price: 1600},
                {name: "WD Blue 1TB HDD", image: "https://m.media-amazon.com/images/I/71CX1Wy590L._AC_SL1500_.jpg", link: "https://www.amazon.eg/s?k=wd+blue+1tb", price: 1200},
                {name: "Crucial MX500 1TB", image: "https://m.media-amazon.com/images/I/719rzjNHlRL._AC_SL1500_.jpg", link: "https://www.amazon.eg/s?k=crucial+mx500+1tb", price: 1700},
                {name: "1TB M.2 NVMe Gen4 SSD", image: "https://m.media-amazon.com/images/I/61zpxT-470L._AC_SL1000_.jpg", price: 2000},
                {name: "1TB NVMe Gen4 (Kingston KC3000)", image: "https://m.media-amazon.com/images/I/71h6Knq1-jL._AC_SL1500_.jpg", price: 2200},
                {name: "1TB NVMe Gen4 (Samsung 980 Pro)", image: "https://m.media-amazon.com/images/I/71b994984DL._AC_SL1500_.jpg", price: 2300},
                {name: "1TB M.2 NVMe Gen4 SSD", image: "https://m.media-amazon.com/images/I/61zpxT-470L._AC_SL1000_.jpg", price: 2000}, // من تجميعة 42000
                {name: "1TB NVMe Gen4 (Kingston KC3000)", image: "https://m.media-amazon.com/images/I/71h6Knq1-jL._AC_SL1500_.jpg", price: 2200}, // من تجميعة 45000
                {name: "1TB NVMe Gen4 SSD (Samsung 980 Pro)", image: "https://m.media-amazon.com/images/I/71b994984DL._AC_SL1500_.jpg", price: 2300}, // من تجميعة 50000
            ],
            motherboards: [
                {name: "MSI B660 Tomahawk", image: "https://m.media-amazon.com/images/I/71ndjT324dL._AC_SL1500_.jpg", link: "https://www.amazon.eg/s?k=msi+b660+tomahawk", price: 2800},
                {name: "ASUS ROG Strix Z690-A", image: "https://m.media-amazon.com/images/I/81ZKTW9x9ZL._AC_SL1500_.jpg", link: "https://www.amazon.eg/s?k=asus+z690-a", price: 4200},
                {name: "Gigabyte B550 Aorus Elite", image: "https://m.media-amazon.com/images/I/71h5UN7hSOL._AC_SL1500_.jpg", link: "https://www.amazon.eg/s?k=gigabyte+b550+aorus", price: 2500},
                {name: "ASRock X570 Phantom", image: "https://m.media-amazon.com/images/I/81yQjXvGgEL._AC_SL1500_.jpg", link: "https://www.amazon.eg/s?k=asrock+x570+phantom", price: 3200},
                {name: "B650 (MSI B650 Tomahawk WiFi)", image: "https://m.media-amazon.com/images/I/71f1y89G+QL._AC_SL1500_.jpg", price: 4000},
                {name: "Z790 WiFi (ASUS TUF)", image: "https://m.media-amazon.com/images/I/91n-vRl6FfL._AC_SL1500_.jpg", price: 4500},
                {name: "B650", image: "https://via.placeholder.com/150/b650_generic/fff?Text=B650", price: 4500},
                {name: "Z790 WiFi", image: "https://via.placeholder.com/150/z790_wifi_generic/fff?Text=Z790+WiFi", price: 4500},
                {name: "B650 (مثلاً: MSI B650 Tomahawk WiFi)", image: "https://m.media-amazon.com/images/I/71f1y89G+QL._AC_SL1500_.jpg", price: 4000}, // من تجميعة 42000
                {name: "B650 أو Z790 WiFi (مثل MSI Tomahawk / ASUS TUF)", image: "https://via.placeholder.com/150/b650_z790_build/fff?Text=B650/Z790", price: 4250}, // متوسط من تجميعة 45000
                {name: "B650 / Z790 WiFi (مثال: ASUS TUF / MSI Tomahawk)", image: "https://via.placeholder.com/150/b650_z790_ultimate/fff?Text=B650/Z790", price: 4500}, // متوسط من تجميعة 50000
            ],
            psus: [
                {name: "Corsair CV550", image: "https://m.media-amazon.com/images/I/61yG01pecVL._AC_SL1500_.jpg", link: "https://www.amazon.eg/s?k=corsair+cv550", price: 850},
                {name: "EVGA 600 BR", image: "https://m.media-amazon.com/images/I/71jTZ25WbYL._AC_SL1242_.jpg", link: "https://www.amazon.eg/s?k=evga+600+br", price: 900},
                {name: "be quiet! System Power 9 600W", image: "https://m.media-amazon.com/images/I/611114eu-KL._AC_SL1000_.jpg", link: "https://www.amazon.eg/s?k=be+quiet+600w", price: 1100},
                {name: "Cooler Master MWE 650", image: "https://m.media-amazon.com/images/I/7154EuRjrnL._AC_SL1500_.jpg", link: "https://www.amazon.eg/s?k=coolermaster+mwe+650", price: 1000},
                {name: "850W 80+ Gold", image: "https://m.media-amazon.com/images/I/71fRz69wYIL._AC_SL1500_.jpg", price: 2200},
                {name: "850W – 1000W 80+ Gold", image: "https://m.media-amazon.com/images/I/71fRz69wYIL._AC_SL1500_.jpg", price: 2500},
                {name: "1000W 80+ Gold", image: "https://m.media-amazon.com/images/I/71fRz69wYIL._AC_SL1500_.jpg", price: 2800},
                {name: "850W 80+ Gold من ماركة محترمة", image: "https://m.media-amazon.com/images/I/71fRz69wYIL._AC_SL1500_.jpg", price:2200}, // من تجميعة 42000
                {name: "850W – 1000W 80+ Gold أو Platinum", image: "https://m.media-amazon.com/images/I/71fRz69wYIL._AC_SL1500_.jpg", price: 2500}, // متوسط من تجميعة 45000
                {name: "1000W 80+ Gold/Platinum", image: "https://m.media-amazon.com/images/I/71fRz69wYIL._AC_SL1500_.jpg", price: 2800}, // متوسط من تجميعة 50000
            ],
            cooling: [
                {name: "Cooler Master Hyper 212", image: "https://m.media-amazon.com/images/I/71ysKnF9jYL._AC_SL1500_.jpg", link: "https://www.amazon.eg/s?k=hyper+212", price: 650},
                {name: "Noctua NH-U12S", image: "https://m.media-amazon.com/images/I/71h6QYXK9dL._AC_SL1500_.jpg", link: "https://www.amazon.eg/s?k=noctua+nh-u12s", price: 1300},
                {name: "Corsair iCUE H100i", image: "https://m.media-amazon.com/images/I/71nCnF9jyCL._AC_SL1500_.jpg", link: "https://www.amazon.eg/s?k=corsair+h100i", price: 2200},
                {name: "DeepCool Gammaxx 400", image: "https://m.media-amazon.com/images/I/61Wp24o5cAL._AC_SL1000_.jpg", link: "https://www.amazon.eg/s?k=gammaxx+400", price: 550},
                // هنضيف أي تبريدات لو موجودة بشكل محدد في التجميعات
            ],
            keyboards: [
                {name: "Logitech G213 Prodigy", image: "https://m.media-amazon.com/images/I/61lB3o99qUL._AC_SL1500_.jpg", link: "https://www.amazon.eg/dp/B01M6YUX56", price: 2200},
                {name: "Razer Huntsman Elite", image: "https://m.media-amazon.com/images/I/715rkVLHc1L._AC_SL1500_.jpg", link: "https://www.amazon.eg/s?k=razer+huntsman+elite", price: 3600},
                {name: "Corsair K70 RGB", image: "https://m.media-amazon.com/images/I/718x5f57-OL._AC_SL1500_.jpg", link: "https://www.amazon.eg/s?k=corsair+k70+rgb", price: 2800},
                {name: "HyperX Alloy FPS Pro", image: "https://m.media-amazon.com/images/I/61i5fFjTFIL._AC_SL1500_.jpg", link: "https://www.amazon.eg/s?k=hyperx+fps+pro", price: 1900},
                {name: "Gaming Combo محترم (ميكانيكال + RGB)", image: "https://m.media-amazon.com/images/I/61tRgvw9WYL._AC_SL1500_.jpg", price: 600}, // من تجميعة 42000
                {name: "Gaming Combo محترم RGB (ميكانيكال و DPI عالي)", image: "https://m.media-amazon.com/images/I/61tRgvw9WYL._AC_SL1500_.jpg", price: 600}, // متوسط من تجميعة 45000
                {name: "Gaming Combo RGB ميكانيكال + DPI عالي", image: "https://m.media-amazon.com/images/I/61tRgvw9WYL._AC_SL1500_.jpg", price: 600}, // متوسط من تجميعة 50000
            ],
            mice: [
                {name: "Logitech G502 Hero", image: "https://m.media-amazon.com/images/I/61YRPow7AVL._AC_SL1500_.jpg", link: "https://www.amazon.eg/s?k=logitech+g502", price: 1200},
                {name: "Razer DeathAdder V2", image: "https://m.media-amazon.com/images/I/71g9NF-3eJL._AC_SL1500_.jpg", link: "https://www.amazon.eg/s?k=razer+deathadder+v2", price: 1400},
                {name: "SteelSeries Rival 3", image: "https://m.media-amazon.com/images/I/61xG-99j29L._AC_SL1500_.jpg", link: "https://www.amazon.eg/s?k=steelseries+rival+3", price: 900},
                {name: "Corsair M65 RGB", image: "https://m.media-amazon.com/images/I/61VwG999VPL._AC_SL1200_.jpg", link: "https://www.amazon.eg/s?k=corsair+m65", price: 1300},
                // الكيبورد والماوس غالبا بيكونوا كومبو بنفس السعر
            ]
        };

        document.addEventListener('DOMContentLoaded', () => {
            // Theme Toggle
            const themeToggle = document.getElementById('theme-toggle');
            const themeIcon = document.getElementById('theme-icon');
            themeToggle.addEventListener('click', () => {
                document.body.classList.toggle('dark');
                themeToggle.classList.add('rotate');
                setTimeout(() => themeToggle.classList.remove('rotate'), 600);
                themeIcon.textContent = document.body.classList.contains('dark') ? '🌙' : '☀️';
            });

            // Sections Toggle and Sorting and Product Click
            document.querySelectorAll('.section-header-container').forEach(headerContainer => {
                const headerArrow = headerContainer.querySelector('.section-header-arrow'); // هنمسك السهم عشان هنحتاجه

                headerContainer.addEventListener('click', (event) => {
                    // نتأكد إن الضغطة مش على زرار الترتيب
                    if (!event.target.classList.contains('sort-button')) {
                        headerArrow.classList.toggle('open');
                        const content = headerContainer.nextElementSibling;
                        content.classList.toggle('visible');
                        if (content.classList.contains('visible')) {
                            renderProducts(headerContainer.dataset.id);
                        }
                    }
                });

                const sortButtons = headerContainer.querySelectorAll('.sort-button');
                sortButtons.forEach(button => {
                    button.addEventListener('click', () => {
                        const sectionId = headerContainer.dataset.id;
                        const sortBy = button.dataset.sort;
                        renderProducts(sectionId, sortBy);
                    });
                });
            });

            function renderProducts(sectionId, sortBy) {
                const productsContainer = document.querySelector(`#${sectionId} .products`);
                if (!catalog[sectionId]) {
                    productsContainer.innerHTML = '<p>لا يوجد منتجات في هذا القسم حاليًا.</p>';
                    return;
                }

                let products = [...catalog[sectionId]];

                if (sortBy === 'price-asc') {
                    products.sort((a, b) => (a.price || Infinity) - (b.price || Infinity));
                } else if (sortBy === 'price-desc') {
                    products.sort((a, b) => (b.price || -Infinity) - (a.price || -Infinity));
                }

                let html = products.map(product => `
                    <div class="product" data-product-name="${product.name}">
                        <img src="${product.image || 'https://via.placeholder.com/150'}" alt="${product.name}">
                        <div class="details">
                            <h3>${product.name}</h3>
                            <p>${product.price ? `السعر: ${product.price} جنيه` : 'السعر غير متوفر'}</p>
                            ${/* هنمسح أو نعلق على السطر ده عشان نشيل زرار "عرض المزيد" */ ''}
                        </div>
                    </div>
                `).join('');

                productsContainer.innerHTML = html;

                // إضافة إيفنت ليسنر لكل منتج بعد عرضه
                productsContainer.querySelectorAll('.product').forEach(productElement => {
                    productElement.addEventListener('click', () => {
                        const productName = productElement.dataset.productName;
                        alert(`اسم المنتج: ${productName}`);
                        // هنا ممكن نضيف كود عشان نعرض تفاصيل أكتر في مكان تاني في الصفحة
                    });
                });
            }

            // QA with flexible search for price and specs
            const qaBtn = document.getElementById('qa-btn');
            const qaInput = document.getElementById('qa-input');
            const qaAnswer = document.getElementById('qa-answer');
            qaBtn.addEventListener('click', handleQuestion);
            qaInput.addEventListener('keypress', function(event) {
                if (event.key === 'Enter') {
                    handleQuestion();
                }
            });

            function handleQuestion() {
                const q = qaInput.value.trim().toLowerCase();
                qaInput.value = '';
                qaAnswer.textContent = 'جاري البحث عن إجابة لسؤالك...';

                if (q) {
                    let found = false;
                    const askForPrice = q.includes('سعر') || q.includes('كام');
                    const askForSpecs = q.includes('مواصفات');

                    for (const section in catalog) {
                        for (const product of catalog[section]) {
                            const productNameLower = product.name.toLowerCase();
                            if (productNameLower.includes(q)) { // هنستخدم includes عشان يدور في الاسم بالكامل
                                let answer = `اسم المنتج: ${product.name}`;
                                if (askForPrice) {
                                    answer += product.price ? `, السعر التقريبي: ${product.price} جنيه` : ', السعر غير متوفر حاليًا';
                                } else if (askForSpecs) {
                                    answer += product.price ? `, السعر التقريبي: ${product.price} جنيه (بيانات مبسطة)` : ' (بيانات مبسطة)';
                                    // هنا ممكن نضيف معلومات أكتر عن المواصفات لو متوفرة في بيانات الكتالوج
                                } else {
                                    qaAnswer.textContent = answer;
                                    found = true;
                                    return;
                                }
                                qaAnswer.textContent = answer;
                                found = true;
                                return;
                            }
                        }
                    }

                    if (!found) {
                        if (
                            q.includes('كمبيوتر') ||
                            q.includes('تجميعة')
                        ) {
                            qaAnswer.textContent = 'يمكنك استعراض المواصفات والأسعار في الأقسام أو زيارة صفحة التجميعات الذكية.';
                        } else {
                            qaAnswer.textContent = 'لم يتم العثور على إجابة محددة لسؤالك.';
                        }
                    }
                } else {
                    qaAnswer.textContent = 'من فضلك اكتب سؤالك.';
                }
            }

            function updateSendButtonText() {
                const qaBtn = document.getElementById('qa-btn');
                if (window.innerWidth <= 600) { // لو عرض الشاشة أقل من أو يساوي 600 بكسل (تقريبي للموبايل)
                    qaBtn.textContent = 'إرسال';
                } else {
                    qaBtn.textContent = 'اسأل';
                }
            }

            // ننفذ الوظيفة عند تحميل الصفحة
            updateSendButtonText();

            // وننفذها تاني عند تغيير حجم الشاشة (في حالة تدوير الموبايل أو تغيير حجم نافذة المتصفح)
            window.addEventListener('resize', updateSendButtonText);
        });
    </script>
</body>
</html>
